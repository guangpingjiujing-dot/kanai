# DataOps ガイド

対象のDWHは **Microsoft Fabric Warehouse** です。

このドキュメントでは、DataOps（データオペレーション）の概念と、dbtを使った実践方法について説明します。

---

## DataOps とは

### 概要

DataOpsは、**DevOpsの考え方をデータパイプラインに適用したもの**です。ソフトウェア開発で成功を収めたDevOpsの原則を、データエンジニアリングの世界に持ち込むことで、データパイプラインの開発・運用を効率化し、品質を向上させます。

### DevOpsとの関係

DevOpsがソフトウェア開発のライフサイクルを改善したように、DataOpsはデータパイプラインのライフサイクルを改善します：

| DevOps | DataOps |
|--------|---------|
| コードの継続的統合・デプロイ | データ変換の継続的統合・デプロイ |
| 自動テスト | データ品質テスト |
| バージョン管理 | データモデルのバージョン管理 |
| モニタリング | データ品質・パフォーマンスのモニタリング |
| コラボレーション | データチーム間のコラボレーション |

### DataOpsの目的

1. **開発速度の向上**: データパイプラインの開発・デプロイを高速化
2. **品質の向上**: データ品質を継続的に監視・改善
3. **信頼性の向上**: エラーを早期発見し、迅速に対応
4. **コラボレーションの促進**: データチーム間の連携を強化
5. **再現性の確保**: 環境間で一貫した動作を保証

---

## DataOpsの原則

### 1. 継続的統合・継続的デプロイ（CI/CD）

データ変換の変更を継続的に統合し、自動的にテスト・デプロイします。

**dbtでの実現方法**:
- Gitによるバージョン管理
- dbt CloudのCI/CD機能
- GitHub ActionsなどのCI/CDパイプライン

### 2. テスト駆動開発（TDD）

データ品質テストを先に定義し、テストが通ることを確認してからデプロイします。

**dbtでの実現方法**:
- `dbt test`によるデータ品質テスト
- Unit Testsによる変換ロジックのテスト
- カスタムテストの作成

### 3. モニタリングとオブザーバビリティ

データパイプラインの実行状況、データ品質、パフォーマンスを継続的に監視します。

**dbtでの実現方法**:
- dbt Cloudの実行ログとメトリクス
- Elementaryによるデータ品質モニタリング
- カスタムフックによる実行ログの記録

### 4. バージョン管理

データモデルと変換ロジックをバージョン管理し、変更履歴を追跡します。

**dbtでの実現方法**:
- Gitによるコード管理
- スナップショットによるデータのバージョン管理

### 5. 環境分離

開発、ステージング、本番環境を分離し、安全にテスト・デプロイします。

**dbtでの実現方法**:
- `profiles.yml`による環境設定
- `target`による環境切り替え
- 環境ごとのスキーマ分離

### 6. ドキュメント化

データモデル、変換ロジック、データ品質テストを文書化し、チームで共有します。

**dbtでの実現方法**:
- `schema.yml`によるモデルのドキュメント化
- `dbt docs generate`によるドキュメント生成
- Lineage（データの依存関係）の可視化
